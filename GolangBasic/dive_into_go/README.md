


### 资料
#### GO 程序是如何跑起来的？
源程序-》汇编程序-〉可重定位（目标程序） -》可执行（目标程序）

一、编译的过程
来源链接：https://juejin.im/post/5d1c087af265da1bb5651356
- 编译过程就是对源文件进行词法分析、语法分析、语义分析、优化，最后生成汇编代码文件，以 .s 作为文件后缀
- 编译过程一般分为 6 步：扫描、语法分析、语义分析、源代码优化、代码生成、目标代码优化


二、什么是词法分析 lexical analysis 
词法分析（lexical analysis）是计算机科学中将字符序列转换为标记（token）序列的过程。进行词法分析的程序或者函数叫作词法分析器（lexical analyzer，简称lexer），也叫扫描器（scanner）。词法分析器一般以函数的形式存在，供语法分析器调用

词法分析器一般以函数的形式存在，供语法分析器调用。

输入：原始的 Go 程序文件
输出：标记(token) 序列 
过程：.go 文件被输入到扫描器（Scanner），它使用一种类似于有限状态机的算法，将源代码的字符系列分割成一系列的记号（Token）

src/cmd/compile/internal/syntax/token.go

src/cmd/compile/internal/syntax/scanner.go， 其中关键的逻辑在 next 函数中。

三、什么是语法分析？
语法分析是根据某种特定的形式文法（Grammar）对 Token 序列构成的输入文本进行分析并确定其语法结构的一种过程

生成的 Token 序列，需要经过进一步处理，生成一棵以表达式为结点的语法树。

语法分析的过程可以检测一些形式上的错误。 如括号是否缺少一半...


四、什么是语义分析？
Go 语言编译器在这一阶段检查常量、类型、函数声明以及变量赋值语句的类型，然后检查哈希中键的类型。
实现类型检查的函数通常都是几千行的巨型 switch/case 语句


五、中间代码生成
Go 语言的中间代码表示形式为 SSA（Static Single-Assignment，静态单赋值），
之所以称之为单赋值，是因为每个名字在 SSA 中仅被赋值一次。 

CPU 的架构设置相应的用于生成中间代码的变量。

六、链接过程

- 《程序员的自我修养》和《深入理解计算机系统》



 