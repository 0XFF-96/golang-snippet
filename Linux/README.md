


### 什么是 bash ?

shell是一个命令解释器，是介于操作系统内核与用户之间的一个绝缘层。
准确地说，它也是能力很强的计算机语言，被称为解释性语言或脚本语言。
它可以通过将系统调用、公共程序、工具和编译过的二进制程序”粘合“在一起来建立应用。


### `#!` 的作用？
shebang 。
Shebang通常出现在类Unix系统的脚本中第一行，作为前两个字符。在Shebang之后，可以有一个或数个空白字符，后接解释器的绝对路径，用于指明执行这个脚本文件的解释器
在 BASH 中 第一行的 "#!" 及后面的 /bin/bash 
就表明该文件是一个 BASH 程序，需要由 /bin 目录下的 bash 程序来解释执行


### 不同方式执行 bash

一、sh xxx.sh
二、../hello.sh 
三、source hello.sh 

> ps 有时候，可能需要权限： chomd u+rx hello.sh

###  重定向，清空文件
1、chmod u+rx hello.sh

### 特殊字符

- 分号, `;` 可以在同一行写两条命令
- `-e`: 用于检查文件是否存在
- 双引号， " STRING" 将会阻止（解释）STRING中大部分特殊的字符
- 单引号， 'STRING' 将会阻止STRING中所有特殊字符的解释，这是一种比使用"更强烈的形式。后面的实验会详细说明
$HOME,单引号会直接认为是字符，而双引号认为是一个变量
- 命令替换： 反引号单命令会优先执行。 cp `mkdir back` test.sh back
- -eq、-gt、-lt 等于,大于,小于
- ？， 三元操作符号
- $, 变量替换


### 特殊字符（二） 
1、命令组，在括号中的命令列表，将会作为一个子 shell 来运行。
父进程，也就是脚本本身，将不能够读取在子进程中创建的变量，也就是在子shell 中创建的变量。 

2、初始化数组， arr = (1 4 5 7 8 21)

3、大括号。大括号中，不允许有空白，除非这个空白被引用或转义

4、条件测试， 中括号。

5、重定向。 
- test.sh > filename：重定向test.sh的输出到文件 filename 中。如果 filename 存在的话，那么将会被覆盖
- test.sh &> filename：重定向 test.sh 的 stdout（标准输出）和 stderr（标准错误）到 filename 中
- test.sh >&2：重定向 test.sh 的 stdout 到 stderr 中
- test.sh >&2：重定向 test.sh 的 stdout 到 stderr 中

6、| 管道， 产生命令链条
7、

### 变量与参数
变量的名字就是变量保存值的地方。引用变量的值就叫做变量替换。
注意⚠️：变量名和等号之间不能有空格。

- readonly, 将变量定义为只读变量，只读变量的值不能被改变。

- 局部变量，
- 环境变量，会影响用户接口和 shell 的行为
- 位置参数， 大于$9的参数必须用{}括起来.

$# ： 传递到脚本的参数个数
$* ： 以一个单字符串显示所有向脚本传递的参数。与位置变量不同,此选项参数可超过 9个
$$ ： 脚本运行的当前进程 ID号
$! ： 后台运行的最后一个进程的进程 ID号
$@ ： 与$*相同,但是使用时加引号,并在引号中返回每个参数
$： 显示shell使用的当前选项,与 set命令功能相同
$? ： 显示最后命令的退出状态。 0表示没有错误,其他任何值表明有错误


-z: 检查字符串长度是否为 0， 为 0 返回 true 
-n: 检查字符串长度是否为 0， 不为零返回 true

详细参考：https://doc.shiyanlou.com/document-uid8797labid3895timestamp1554172035089.png/wm

### 流程控制
略

### shell 函数

定义格式：
shell中函数的定义格式如下：

```
[ function ] funname [()]
{
    action;
    [return int;]
}
```

1、函数返回值在调用该函数后通过 $? 来获得
2、所有函数在使用前必须定义
3、获取函数参数，当n>=10时，需要使用${n}来获取参数。

### Example
1、脚本用于备份最后24小时当前目录下所有修改的文件


### 文件类型
- 普通文件、符号链接、目录、字符设备、块设备、套接字、FIFO 
